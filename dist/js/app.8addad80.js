(function(t){function e(e){for(var n,s,c=e[0],i=e[1],u=e[2],p=0,d=[];p<c.length;p++)s=c[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,c=1;c<r.length;c++){var i=r[c];0!==o[i]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=i;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"098d":function(t,e,r){"use strict";r("c5d1")},2673:function(t,e,r){"use strict";r("8a8e")},"40bb":function(t,e,r){"use strict";r("ec9c")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],s={name:"App",sockets:{error:function(t){"not authenticated"===t?this.$router.push({name:"Login"}):alert(t)}}},c=s,i=(r("034f"),r("2877")),u=Object(i["a"])(c,o,a,!1,null,null,null),l=u.exports,p=r("8c4f"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Header"),r("div",{staticClass:"products container"},t._l(Math.ceil(t.products.length/3),(function(e){return r("div",{staticClass:"row"},t._l(3,(function(n){return t.products.length>3*(e-1)+(n-1)?r("Product",{attrs:{product:t.products[3*(e-1)+(n-1)]}}):r("Product")})),1)})),0)],1)},m=[],f=r("5530"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[""!==t.username?r("p",{staticClass:"loginLabel"},[t._v("Logged in as:")]):t._e(),""!==t.username?r("p",{staticClass:"user"},[t._v(t._s(t.username))]):t._e(),r("p",{staticClass:"title"},[t._v("Online-shop")]),r("p",{staticClass:"subtitle"},[t._v("Generic line for site!")]),r("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),""===t.username?r("router-link",{attrs:{to:"/login"}},[t._v("Login")]):t._e(),""===t.username?r("span",[t._v(" | ")]):t._e(),""===t.username?r("router-link",{attrs:{to:"/register"}},[t._v("Register")]):t._e(),""!==t.username?r("router-link",{attrs:{to:"/cart"}},[t._v("Cart")]):t._e(),""!==t.username?r("span",[t._v(" | ")]):t._e(),""!==t.username?r("a",{staticClass:"clickable",on:{click:t.onLogout}},[t._v("Logout")]):t._e()],1)},b=[],v=r("2f62"),g={name:"Header",computed:{username:function(){return localStorage.username?localStorage.username:""}},methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["logout"])),{},{onLogout:function(){var t=this;this.logout().then((function(){"/"===t.$route.fullPath?t.$router.go(0):t.$router.push({name:"Home"})}))}})},C=g,_=(r("fb42"),Object(i["a"])(C,h,b,!1,null,"e4d1bb30",null)),j=_.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product mb-3 col"},[t.product?n("div",{staticClass:"wrapper"},[n("img",{staticClass:"image",attrs:{alt:"product image",src:r("df9e")},on:{click:t.onClick}}),n("p",{staticClass:"title",on:{click:t.onClick}},[t._v(t._s(t.product.name))]),n("p",{staticClass:"price",on:{click:t.onClick}},[t._v(" Price: "+t._s(t.product.price)+"$ ")]),n("b-button",{staticClass:"button",attrs:{variant:"primary"},on:{click:t.onAddToCart}},[t._v("Add to cart")])],1):n("div",{staticStyle:{width:"100%",height:"100%",border:"none"}})])},w=[],O=(r("b0c0"),{name:"Product",props:{product:{}},methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["addToCart"])),{},{onClick:function(){this.$router.push({name:"ProductView",params:{product:this.product}})},onAddToCart:function(){""!==localStorage.username?(this.addToCart(this.product),alert(this.product.name+" has been added to your cart")):this.$router.push({name:"Login"})}})}),y=O,P=(r("098d"),Object(i["a"])(y,k,w,!1,null,"499d0140",null)),x=P.exports,S={name:"Home",components:{Header:j,Product:x},computed:Object(f["a"])({},Object(v["c"])(["products"])),methods:Object(f["a"])({},Object(v["b"])(["getProducts"])),mounted:function(){this.getProducts()}},$=S,T=(r("fe37"),Object(i["a"])($,d,m,!1,null,"47c39561",null)),E=T.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-view"},[n("Header"),n("div",{staticClass:"wrapper"},[n("img",{staticClass:"image",attrs:{alt:"product image",src:r("df9e")}}),n("div",{staticClass:"product-info"},[n("p",[t._v(t._s(t.product.name))]),n("p",{staticClass:"description"},[t._v("Generic product description. Generic product description. Generic product description. ")]),n("p",[t._v("Price: "+t._s(t.product.price)+"$")]),n("b-button",{staticClass:"button",attrs:{variant:"primary"},on:{click:t.onAddToCart}},[t._v("Add to cart")])],1)]),n("div",{staticClass:"comments"},[n("p",{staticClass:"comments-title"},[t._v("Comments:")]),0===t.product.comments.length?n("p",{staticClass:"no-comments"},[t._v("No comments available !")]):t._l(t.product.comments,(function(t){return n("Comment",{attrs:{comment:t}})})),n("hr"),n("div",{staticClass:"new-comment"},[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"New comment",rows:"4","max-rows":"4"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("b-button",{staticClass:"button",attrs:{variant:"primary"},on:{click:t.onComment}},[t._v("Comment")])],1)],2)],1)},R=[],D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"comment"},[r("p",{staticClass:"username"},[t._v(t._s(t.comment.user.username)+":")]),r("div",{staticClass:"wrapper"},[r("p",{staticClass:"content"},[t._v(t._s(t.comment.content))]),t.comment.user.username===t.username?r("b-button",{staticClass:"button",attrs:{variant:"danger"},on:{click:t.onDelete}},[t._v("Delete")]):t._e()],1)])},H=[],I={name:"Comment",props:{comment:{}},computed:{username:function(){return localStorage.username?localStorage.username:""}},methods:{onDelete:function(){this.$socket.emit("remove",{token:localStorage.token,comment:this.comment})}}},J=I,N=(r("b841"),Object(i["a"])(J,D,H,!1,null,"3ac6f937",null)),U=N.exports,A={name:"ProductView",components:{Header:j,Comment:U},data:function(){return{text:""}},props:{product:{}},computed:Object(f["a"])({},Object(v["c"])(["products"])),methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["addToCart"])),{},{onAddToCart:function(){""!==localStorage.username?(this.addToCart(this.product),alert(this.product.name+" has been added to your cart")):this.$router.push({name:"Login"})},onComment:function(){this.$socket.emit("add",{token:localStorage.token?localStorage.token:"",userID:parseInt(localStorage.id),productID:this.product.id,text:this.text}),this.text=""}})},q=A,F=(r("8b82"),Object(i["a"])(q,L,R,!1,null,"63aed5ed",null)),M=F.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart"},[r("Header"),r("div",{staticClass:"products"},t._l(t.cart,(function(t){return r("CartProduct",{attrs:{product:t.product}})})),1),t.cart.length>0?r("b-button",{staticClass:"button",attrs:{variant:"primary"},on:{click:t.onBuy}},[t._v("Buy")]):r("p",{staticStyle:{height:"100%","margin-top":"25vh","font-size":"25px"}},[t._v("Your cart is empty!")])],1)},V=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cart-product"},[n("img",{staticClass:"image",attrs:{alt:"product image",src:r("df9e")}}),n("p",{staticClass:"title"},[t._v(t._s(t.product.name))]),n("p",{staticClass:"price"},[t._v(" Price: "+t._s(t.product.price)+"$ ")]),n("b-button",{staticClass:"button",attrs:{variant:"danger"},on:{click:t.onRemoveFromCart}},[t._v("Remove from cart")])],1)},z=[],W={name:"CartProduct",props:{product:{}},methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["removeFromCart"])),{},{onRemoveFromCart:function(){this.removeFromCart(this.product)}}),actions:{}},Y=W,K=(r("8a33"),Object(i["a"])(Y,B,z,!1,null,"62cf1860",null)),Q=K.exports,X={name:"Cart",components:{Header:j,CartProduct:Q},computed:Object(f["a"])({},Object(v["c"])(["cart"])),methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["getCart","buy"])),{},{onBuy:function(){this.buy()}}),mounted:function(){0===this.cart.length&&this.getCart()}},Z=X,tt=(r("40bb"),Object(i["a"])(Z,G,V,!1,null,"55248d75",null)),et=tt.exports,rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"authentification"},["Login"===t.type?r("div",{staticClass:"form"},[r("Login")],1):t._e(),"Register"===t.type?r("div",{staticClass:"form"},[r("Register")],1):t._e()])},nt=[],ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-1",label:"Username:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Enter Username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Enter Password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("b-button",{attrs:{variant:"primary"},on:{click:t.onSubmit}},[t._v("Login")])],1)},at=[],st={name:"Login",data:function(){return{form:{username:"",password:""}}},methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["login"])),{},{onSubmit:function(){var t=this;this.login(this.form).then((function(){t.$router.push({name:"Home"})})).catch((function(){alert("Wrong password or username!")}))}})},ct=st,it=Object(i["a"])(ct,ot,at,!1,null,"033bd4c0",null),ut=it.exports,lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-1",label:"Username:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Enter Username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Enter Password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-3",label:"Repeat Password:","label-for":"input-3"}},[r("b-form-input",{attrs:{id:"input-3",type:"password",placeholder:"Repeat Password",required:""},model:{value:t.form.repeatedPassword,callback:function(e){t.$set(t.form,"repeatedPassword",e)},expression:"form.repeatedPassword"}})],1),r("b-button",{attrs:{variant:"primary"},on:{click:t.onRegister}},[t._v("Register")])],1)},pt=[],dt={name:"Register",data:function(){return{form:{username:"",password:"",repeatedPassword:""}}},methods:Object(f["a"])(Object(f["a"])({},Object(v["b"])(["register"])),{},{onRegister:function(){var t=this;this.register(this.form).then((function(){t.$router.push({name:"Home"})})).catch((function(t){alert(t)}))}})},mt=dt,ft=Object(i["a"])(mt,lt,pt,!1,null,"b2e8cd3a",null),ht=ft.exports,bt={name:"Authentification",props:{type:String},components:{Login:ut,Register:ht}},vt=bt,gt=(r("2673"),Object(i["a"])(vt,rt,nt,!1,null,"0fe9e93e",null)),Ct=gt.exports;n["default"].use(p["a"]);var _t=[{path:"/",name:"Home",component:E},{path:"/productView",name:"ProductView",component:M,props:!0},{path:"/cart",name:"Cart",component:et},{path:"/login",name:"Login",component:Ct,props:{type:"Login"}},{path:"/register",name:"Register",component:Ct,props:{type:"Register"}}],jt=new p["a"]({mode:"history",base:"/",routes:_t}),kt=jt,wt=r("5132"),Ot=r.n(wt),yt=r("5f5b"),Pt=r("b1e0");r("f9e3"),r("2dd8"),r("d3b7"),r("159b"),r("4de4"),r("e9c4");n["default"].use(v["a"]);var xt=new v["a"].Store({state:{cart:[],id:0,token:"",username:"",products:[]},mutations:{removeComment:function(t,e){t.products.forEach((function(t){t.id===e.productID&&(t.comments=t.comments.filter((function(t){return t.id!==e.id})))}))},addComment:function(t,e){var r=t.products.filter((function(t){return t.id===e.productID}))[0];r.comments.push(e)},unsetCart:function(t,e){t.cart=t.cart.filter((function(t){return t.productID!==e.id}))},setCart:function(t,e){t.cart.push(e)},setProducts:function(t,e){t.products=e},setUser:function(t,e){if(null==e)return t.username="",t.id=0,localStorage.username="",void(localStorage.id=0);t.id=e.id,t.username=e.username,localStorage.id=e.id,localStorage.username=e.username},setToken:function(t,e){t.token=e,localStorage.token=e}},actions:{removeFromCart:function(t,e){var r=t.commit;r("unsetCart",e),fetch("https://sj-projekat-api-2021.herokuapp.com/user/carts",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productID:e.id})}).then((function(t){t.json().then((function(t){}))}))},buy:function(t){var e=t.commit,r=t.state;r.cart.forEach((function(t){e("unsetCart",t.product)})),fetch("https://sj-projekat-api-2021.herokuapp.com/user/carts/all",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:parseInt(localStorage.id)})}).then((function(t){t.json().then((function(t){}))}))},getCart:function(t){var e=t.commit;fetch("https://sj-projekat-api-2021.herokuapp.com/user/carts/".concat(parseInt(localStorage.id))).then((function(t){t.json().then((function(t){t.forEach((function(t){e("setCart",t)}))}))}))},addToCart:function(t,e){var r=t.commit;t.state;fetch("https://sj-projekat-api-2021.herokuapp.com/user/carts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:parseInt(localStorage.id),productID:e.id,quantity:1})}).then((function(t){t.json().then((function(t){r("setCart",t)}))}))},getProducts:function(t){var e=t.commit;fetch("https://sj-projekat-api-2021.herokuapp.com/user/products").then((function(t){t.json().then((function(t){e("setProducts",t)}))}))},login:function(t,e){var r=t.commit;return new Promise((function(t,n){fetch("https://sj-projekat-auth-2021.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})}).then((function(e){e.json().then((function(e){return r("setUser",e.user),r("setToken",e.token),t()})).catch((function(){n()}))})).catch((function(){n()}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){e("setUser",null),e("setToken",""),t()}))},register:function(t,e){var r=t.commit;return new Promise((function(t,n){return e.username.length<3||e.username.length>8?n("Username must be between 3-8 characters!"):e.password.length<8?n("Password must be at least 8 characters long"):e.password!==e.repeatedPassword?n(null):void fetch("https://sj-projekat-auth-2021.herokuapp.com/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})}).then((function(e){e.json().then((function(e){r("setUser",e.user),r("setToken",e.token),t()})).catch((function(){n()}))})).catch((function(){n()}))}))},socket_add:function(t,e){var r=t.commit;r("addComment",JSON.parse(e))},socket_remove:function(t,e){var r=t.commit;r("removeComment",JSON.parse(e))}}});n["default"].use(yt["a"]),n["default"].use(Pt["a"]),n["default"].use(new Ot.a({debug:!1,connection:"https://sj-projekat-api-2021.herokuapp.com/",vuex:{store:xt,actionPrefix:"socket_"}})),n["default"].config.productionTip=!1,new n["default"]({router:kt,store:xt,render:function(t){return t(l)}}).$mount("#app")},"5e3a":function(t,e,r){},"85ec":function(t,e,r){},"8a33":function(t,e,r){"use strict";r("c972")},"8a8e":function(t,e,r){},"8b82":function(t,e,r){"use strict";r("a23d")},a23d:function(t,e,r){},a84a:function(t,e,r){},b841:function(t,e,r){"use strict";r("d5e9")},c5d1:function(t,e,r){},c972:function(t,e,r){},d5e9:function(t,e,r){},df9e:function(t,e,r){t.exports=r.p+"img/no_image.80b0d06c.jpg"},ec9c:function(t,e,r){},fb42:function(t,e,r){"use strict";r("5e3a")},fe37:function(t,e,r){"use strict";r("a84a")}});
//# sourceMappingURL=app.8addad80.js.map